<div id="notify-container-market"></div>
<div class="market" ng-if="initFinished">

	<marketplace-banner><!--see the directive--></marketplace-banner>

	<filter-status></filter-status>
	<filterbar filter=filter></filterbar>
	
	<div class="large-12 columns" ng-hide="!loaded || showMap">
		<div class="wish-list" ng-if="!items.length">
			<div ng-show="filterIsOn" class="row">
				<div class="large-8 large-centered columns box text-center" style="padding:1em">
					<p translate class="padding-2">MARKETPLACE.FILTER_NOT_FOUND</p>
					<div class="large-6 columns text-center">
						<a ng-click="toggleFilter()">{{ "MARKETPLACE.EDIT_FILTER" | translate}}</a>
					</div>
					<div  class="large-6 columns text-center">
						<a ng-click="resetFilter()">{{ "MARKETPLACE.RESET_FILTER" | translate}}</a>
					</div>
				</div>
			</div>
			<div ng-show="!filterIsOn" class="row">
				<div class="large-8 large-centered columns box text-center" style="padding:1em">
					<p translate class="padding-2">MARKETPLACE.NOTHING_FOUND</p>
				</div>
			</div>
		</div>

		<div when-scrolled="load()" ng-if="items.length" loading-in-progress="loading" class="wish-list">
			<item keywords-active="keywordsActive" delayed-view="item.index" item="item" ng-repeat="item in items track by $index" user="user" community="loggedCommunity"></item>
		</div>
	</div>
	<div class="clear"></div>
	<div loading show="loading"></div>

	<div class="large-12 columns" ng-if="showMap">
		<search-map show-map="showMap" location="myLocation" set-loading-fn="setLoadingComplete()" logged-user="loggedUser" set-location-fn="updateLocation(location)"></search-map>
	</div>
</div>