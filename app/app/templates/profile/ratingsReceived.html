<div ng-include="'templates/profile/subPanel.html'"></div>
<div class="ratings-given row rating-item animate-show" ng-show="showUserRatingForm">
	<section class="large-2 columns photo">
		<a>
			<div class="avatar">
				<img ng-src="{{loggedUser.avatar.normal}}" ng-if="loggedUser.avatar.normal" />
			</div>
			<div class="name">{{ item.user_from_full_name}}</div>
		</a>
	</section>
	<section class="large-10 columns user-rating-form">
	<div class="item community">
		<div class="overlap"> </div>
		<div class="arrowbox"></div>
		<div class="arrow"></div>
		<div class="content">

			<h3>{{ 'ADD_USER_RATING' | translate }}</h3>
			<div class="rating-notify-box"></div>
			<div class="score-select">
				<span ng-class="{bold: rating.score == 1}" ng-click="rating.score = 1">Kladne</span>
				<span ng-class="{bold: rating.score == -1}" ng-click="rating.score = -1">Zaporne</span>
			</div>
			<br>
		    <form ng-submit="sendRating(rating)" id="ratingForm" name="ratingForm" novalidate class="clearfix">
		        <p class="success" ng-if="sent">{{ 'USER_RATING_WAS_SENT' | translate }}</p>
		        <label>
		            <textarea autosize-textarea rows="4" name="text" placeholder="{{'WRITE_USER_SOME_RATING' | translate }}" ng-focus="showError.text = false" ng-blur="showError.text = true;" ng-model="rating.text" ng-required="true" class="text-input"></textarea>
					<max-len-counter max-len="300" value="rating.text"></max-len-counter>

		            <div class="moveUp error" ng-show="showError.text">
		                <span ng-show="ratingForm.text.$error.required">{{ 'ERR_NOT_FILLED_RATING' | translate }}</span>
		            </div>
					<div class="clear"></div>
		        </label>
		        <a ng-click="closeUserRatingForm()">{{ 'CANCEL' | translate }}</a>
		        <button type="submit" class="button-send right">{{ 'SEND_USER_RATING' | translate }}</button>
		    </form>
	    </div>
    </div>
	</section>
</div>
<div class="clear"></div>
<div class="large-10 user-rating-link" ng-if="!mine && !showUserRatingForm">
	<div class="" style="text-align:center;">
	    Pošlete uživateli <a ng-click="openUserRatingForm(1)">kladne</a> / <a ng-click="openUserRatingForm(-1)">zaporne</a> hodnoceni
	</div>
	<div class="clear"></div>
</div>

<div class="rating-listing">
<article class="row rating-item rating_{{ item._id }}" ng-repeat="(id, item) in data track by $index">
	<section class="large-2 columns photo">
		<a ng-href="#!/{{ getProfileLinkByType(item.user_from_type) }}/{{item.user_from}}">
			<div class="avatar">
				<img ng-src="{{item.user_from_avatar.normal}}" ng-if="item.user_from_avatar.normal" />
			</div>
			<div class="name">{{ item.user_from_full_name}}</div>
		</a>
	</section>
	<section class="large-10 columns community-section">
		<div class="item community">
			<div class="overlap"> </div>
			<div class="arrowbox"></div>
			<div class="arrow"></div>
			<div class="content">
				<div class="fright">
					<div class="date" title="{{item.updated_at | date:DATETIME_FORMATS.medium}}"><i class="fa fa-clock-o"></i>&nbsp; {{ item.updated_at | ago }}</div>
				</div>			
				<div class="text-container clear clearfix">
					<p ng-bind-html="item.text | linky:'_blank'"></p>
				</div>
			</div>
		</div>
	</section>
</article>
</div>