<article class="row fulltext" when-scrolled="load(1)" offset="300" loading-in-progress="!loaded">
    <section class="large-12  columns box  margin-bottom-20">
        <article class="row">
            <section class="large-12 columns">
                <header>
                    <div ng-if="items.length" ng-bind-html="'FULLTEXT_WE_FOUND_RESULTS' | translate: {value: queryText}"></div>
                </header>
            </section>
        </article>

        <article class="row">
            <section class="large-12  columns">
                <dl class="sub-nav filter">
                    <dt>{{ 'FULLTEXT_FILTER_SEARCH_RESULTS' | translate }}:</dt>
                    <dd ng-click="setFilter('all')" ng-class="{active: selectedFilter == 'all'}">
                        <a>{{ 'FULLTEXT_ALL' | translate }} <b>{{counters.post + counters.community + counters.user}}</b></a>
                    </dd>
                    <dd ng-click="setFilter('post')" ng-class="{active: selectedFilter == 'post'}">
                        <a>{{ 'FULLTEXT_MARKET' | translate }} <b>{{counters.post}}</b></a>
                    </dd>
                    <dd ng-click="setFilter('community')" ng-class="{active: selectedFilter == 'community'}">
                        <a>{{ 'FULLTEXT_COMMUNITY' | translate }} <b>{{counters.community}}</b></a>
                    </dd>
                    <dd ng-click="setFilter('user')" ng-class="{active: selectedFilter == 'user'}">
                        <a>{{ 'FULLTEXT_USERS' | translate }} <b>{{counters.user}}</b></a>
                    </dd>
                </dl>
            </section>
        </article>

        <div ng-if="!items.length && loaded" class="large-8 large-centered columns text-center" ng-bind-html="'FULLTEXT_NOTHING_FOUND_RELATED_TO' | translate: {value: queryText}"></div>
        <section id="fulltextSearchResults">
            <article ng-repeat="item in items" class="row search-item" ng-switch="item._type">
                <section class="large-2 columns text-center">
                    <avatar src="item.avatar.normal" href="basePath+getProfileLinkByType(item.author._type || item._type)+'/'+(item.author._id || item._id)" type="item.item_type"></avatar>
                </section>
                <section class="large-10 columns">
                    <i class="fa" ng-class="{'icon-marketplace' : item._type=='Post', 'fa-user': item._type=='User', 'fa-group': item._type=='Community'}"></i>
                    <a class="title" ng-href="{{ basePath+getProfileLinkByType(item._type)}}/{{item._id}}">
                        <span ng-if="title">{{item.title}}</span>
                        <span ng-if="!title">{{item.name | ellipsis: 50}}</span>
                        <span ng-if="item.author.name">({{item.author.name}})</span>

                    </a>
                    <p ng-switch-when="Post">{{item.name | ellipsis: 150}}</p>
                    <p ng-switch-when="User">{{item.about | ellipsis: 150}}</p>
                    <p ng-switch-when="Community">{{item.description | ellipsis: 150}}</p>

                    <div class="breadcrumb" ng-switch-when="Post">
                        <a ng-href="{{ basePath }}">{{'HOMEPAGE_MARKET' | translate}}</a> &gt;
                        <a ng-href="{{ basePath }}post/{{item._id}}">{{item.title || item.name  | ellipsis: 50}}</a>
                        <span ng-if="item.locations.length && item.locations[0].name">/ {{item.locations[0].name}}</span>/ {{item.updated_at | date : DATETIME_FORMATS.mediumDate}}
                    </div>
                    <div class="breadcrumb" ng-switch-when="User">
                        {{'people' | translate}} &gt;
                        <a ng-href="{{ basePath }}profile/{{item._id}}">{{item.title || item.name  | ellipsis: 50}}</a>
                    </div>
                    <div class="breadcrumb" ng-switch-when="Community">
                        <a ng-href="{{ basePath }}communities">{{'COMMUNITIES' | translate}}</a> &gt;
                        <a ng-href="{{ basePath }}profile/{{item._id}}">{{item.title || item.name  | ellipsis: 50}}</a>
                    </div>
                </section>
            </article>
        </section>
        <div loading show="!loaded"></div>
    </section>
</article>
