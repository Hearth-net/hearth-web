<div class="box messages" dynamic-height offset="150" min-height="400">
	<div class="messages-filer left" ng-if="conversationsCounters">
		<a ng-click="loadConversations({type:'inbox'})">Inbox</a>		
		<a ng-click="loadConversations({type:'archive'})">Archive</a>		
		<a ng-click="loadConversations({type:'all'})">All</a>		
	</div>
	<a ng-href="#!/messages/new" class="button-send right">{{ 'MESSAGES.ADD_NEW_MESSAGE' | translate }}</a>
	<div class="clear"></div>
	<div loading show="!conversations"></div>
	<div class="text-center" ng-if="conversations && !conversations.length">
		{{ 'MESSAGES.LIST.NO_RESULT' | translate }}
	</div>
	
	<div class="messages-container" ng-if="conversations" dynamic-height offset="60" container=".messages" min-height="340">
		<div class="collumn left large-3 conversations">
			<div class="message-conversation" ng-class="{'conversation-unreaded': !item.read}" ng-repeat="item in conversations" ng-click="showConversation(item)">
				<div class="avatars avatar-count-{{item.participants.length}}">
					<avatar src="person.avatar.normal" size="mini" type="person._type" ng-repeat="person in item.participants | limitTo:4:4"></avatar>
				</div>
				<div class="conversation-info">
					<h5 ng-if="item.title">{{ item.title }}</h5>
					<h5 ng-if="!item.title"><i>{{ 'MESSAGES.LIST.CONVERSATION_HAS_NO_TITLE' | translate }}</i></h5>
					<div class="clear"></div>

					<div ng-if="item.message.text">{{ item.message.text | ellipsis:40 }}</div>
					<i ng-if="item.last_message_time">{{ item.last_message_time | date:mediumTime }}</i>
				</div>
				<div class="clear"></div>
				<hr />
			</div>
		</div>
		<div class="collumn right large-8 conversation-detail-container">
			<conversation-detail ng-if="detail" info="detail"></conversation-detail>
		</div>
		<div class="clear"></div>
	</div>
</div>
