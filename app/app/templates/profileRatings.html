<div ng-hide="isMine">
    <div class="padding-2 row" ng-hide="rating.dialogShown">
        <div class="small-12 medium-12 large-5 columns">
            <div class="button-group radius ratings" signed-in>
                <button type="button" class="primary button round connect-right" ng-click="showRatingDialog(1)" ng-disabled="rating.dialogShown" analytics-on analytics-event="click on thumb up" analytics-category="Other profile" analytics-label="thanks">
                    <i class="hearthicon-appreciate"><span>{{ 'THUMB_UP' | translate }}</span></i>
                </button>
                <button type="button" class="primary button round connect-left" ng-click="showRatingDialog(-1)" ng-disabled="rating.dialogShown" analytics-on analytics-event="click on thumb down" analytics-category="Other profile" analytics-label="thanks">
                    <i class="hearthicon-hate"></i>
                </button>
            </div>
        </div>
        <div class="small-12 medium-12 large-7 columns" ng-show="profile.up_votes + profile.down_votes" ng-cloak>
            <feedback up-votes="profile.up_votes" down-votes="profile.down_votes"></feedback>
        </div>
    </div>
    <div signed-in>
        <form name="profileRatingForm" ng-cloak ng-show="rating.dialogShown" ng-submit="saveRating()" class="profile-rate">
            <small class="alert-box visible alert error round connect-bottom" ng-show="rating.errors.text">{{ rating.errors.text | translate}}</small>
            <small class="alert-box visible alert error round connect-bottom" ng-show="profileRatingForm.text.$error.maxlength">{{ 'VALIDATION_MAX_LENGTH' | translate}}</small>
          
            <div style="position:relative; z-index:11;">
                <textarea ng-class="{ 'text-input': true, 'error': rating.errors.text }" required  ng-model="rating.data.text" name="text"  placeholder="{{ feedbackPlaceholder }}" ng-maxlength="500"></textarea>
                <a class="left" ng-click="rating.dialogShown = false">{{ 'CANCEL' | translate }}</a>
                <button type="submit" class="right primary button" ng-disabled="profileRatingForm.$invalid">
                    <i class="center hearthicon-appreciate" ng-cloak ng-show="rating.data.score > 0"></i>
                    <i class="center hearthicon-hate" ng-cloak ng-show="rating.data.score < 0"></i>
                    {{ 'SUBMIT' | translate }}
                </button>
                <div class="cleaner"></div>
            </div>
        </form>
    </div>
    <div signed-out>
        <div class="padding-2" ng-cloak ng-show="rating.dialogShown">
            <div class="round login-prompt" translate>
            LOG_IN_TO_POST_RATING
            </div>
        </div>
    </div>
</div>

<div ng-show="isMine">
    <div class="padding-2 row" ng-show="ratings.length > 0" ng-cloak>
        <div class="small-12 large-7 columns">
            <feedback up-votes="profile.up_votes" down-votes="profile.down_votes"></feedback>
        </div>
        <div class="large-5 columns hide-for-small">
            <div class="right">
                <i class="hearthicon-appreciate"></i>&nbsp;{{ profile.up_votes }}
                /
                <i class="hearthicon-hate"></i>&nbsp;{{ profile.down_votes }}
            </div>
        </div>
    </div>
</div>

<div when-scrolled="loadMore('feedback')" ng-cloak class="wish-list" >
    <div ng-show="!ratings.length" ng-cloak>
        <div ng-cloak ng-show="!isMine" class="hr"></div>
        <div ng-cloak ng-show="!isMine" class="padding-2">{{ 'USER_HAS_NOT_BEEN_RATED' | translate }}</div>
        <div ng-cloak ng-show="isMine" class="padding-2">{{ 'YOU_HAVE_NOT_BEEN_RATED' | translate }}</div>
    </div>
    <div class="hr"></div>
    <div ng-repeat="rating in ratings" class="wish-container">
        <div class="rating row" ng-class="{ 'positive': rating.score > 0, 'negative': rating.score < 0 }">
            <avatar source="rating.user_from_avatar" size="normal" class="left photo" click="go('profile', rating.user_from)"></avatar>
            <!-- TODO avatar for community detect -->
            <div class="small-12 columns rating-text hyphenate" style="width:99%;">
                <div class="right small">
                    <time-ago from-time="rating.created_at"></time-ago>
                </div>

                <a ng-href="#/{{rating.entity_helper}}/{{ rating.user_from }}" ng-show="rating.user_from_full_name">
                  <i class="hearthicon-appreciate" ng-cloak ng-show="rating.score > 0"></i>
                  <i class="hearthicon-hate" ng-cloak ng-show="rating.score < 0"></i>
                  {{ rating.user_from_full_name }}
                </a>
                <p ng-cloak ng-show="rating.text" style="margin-bottom:0;">{{rating.text | urlize}}</p>
            </div>
        </div>
    </div>
</div>