<div class="message-reply">
	<form novalidate name="msgReplyForm" ng-submit="sendReply(reply)" class="formStyle">
		<label for="reply-text">
			<div class="author-info">
				<div ng-if="actors.length == 1 && actors[0]._type != 'Community'">
					{{ 'MESSAGES.REPLY.TEXT_LABEL' | translate }}
				</div>
				<div ng-if="actors.length == 1 && actors[0]._type == 'Community'">
					<strong>{{ 'MESSAGES.REPLY_AS_COMMUNITY' | translate }}</strong>
					<avatar src="actors[0].avatar.normal" type="actors[0]._type" class="" size="mini"></avatar>
					<span>{{ actors[0].name | ellipsis:55 }}</span>
				</div>
			</div>
		</label>
		<div>
			<author-selector ng-if="actors.length > 1" id="author" author-id="reply.current_community_id" author-list="actors"></author-selector>
			<textarea ng-disabled="!conversation.is_member || sendingReply" rows="1" id="reply-text" name="text" autosize-textarea resized="onResize()" ng-required="true" ng-attr-placeholder="{{ 'MESSAGES.REPLY.TEXT_PLACEHOLDER' | translate }}" ng-model="reply.text"></textarea>
			<div class="error" ng-show="msgReplyForm.text.$invalid && showError.text">
				<span ng-show="msgReplyForm.text.$error.required">{{ 'ERR_MESSAGE_TEXT_MIN_LEN' | translate }}</span>
			</div>
		</div>
		<div class="files-upload">
			<input type="file" id="file" class="file-input" onchange="angular.element(this).scope().uploadedFile(this)" />
			<div>
				<label class="file-label" for="file" tabindex="0">
					<span ng-if="!reply.attachments_attributes">{{'ADD_ATTACHMENT' | translate}}</span>
					<span ng-if="reply.attachments_attributes">{{'CHANGE_ATTACHMENT' | translate}}</span>
				</label>
				<span class="display-inline-block margin-left-medium text-danger" ng-if="invalidFileType.shown" translate="FILE_TYPE.INVALID_TYPE" translate-values="{type: invalidFileType.type}"></span>
			</div>
			<div class="files" ng-if="reply.attachments_attributes">
				<div ng-show="sendingReply" class="loading">
					<i class="fa fa-spinner fa-spin"></i>
				</div>
				<div ng-if="!fileIsImage" class="file-preview fleft">
					<i class="fa fa-times remove-from-file-preview" tabindex="0" ng-click="removeAttachments()"></i>
					<i class="fa fa-file"></i>
					<p class="file-name">{{reply.attachments_attributes.name}}</p>
				</div>
				<div ng-if="fileIsImage" class="file-preview image fleft">
					<img id="file-preview" />
				</div>
				<div class="clear"></div>
			</div>
		</div>
		<div class="bottom">
			<a class="left link hide-for-large-up" ng-click="closeConversation()">
				{{ 'CLOSE' | translate }}
			</a>
			<button ng-disabled="!conversation.is_member || sendingReply" type="submit" class="margin-0 button-send right">
				{{ 'SEND' | translate }}
			</button>
		</div>
	</form>
</div>