<div when-scrolled="loadNext()">
  <div ng-repeat="(id, item) in timelineItems track by $index">
    <hr/>
    <div class="timeline-item padding-horizontal-medium">

      <!-- timeline header -->
      <div class="display-flex flex-space-between block">
        <div class="display-flex flex-align-baseline">
          <div ng-init='iconType = getIconType(item)'>
            <i class="fa" ng-class="iconType" aria-hidden="true"></i>
          </div>
          <span ng-bind-html="item.text"></span>
        </div>
        <div ng-if="item.verb !='group'" class="date nowrap" title="{{:: item.created_at | date:DATETIME_FORMATS.medium}}">
          <i class="fa fa-clock-o"></i><span ng-bind=":: '\u00A0' + (item.created_at | ago)"></span>
        </div>
        <!-- timespan for groups-->
        <div ng-if="item.verb =='group'" class="date nowrap">
          <i class="fa fa-clock-o"></i><span ng-bind=":: '\u00A0' + (('AGO.' + item.time_span.toUpperCase())| translate)"></span>
        </div>
      </div>

      <!-- timeline content-->
      <div class="timeline-item-content">
        <div ng-if="item.verb == 'community_accepted_user'" class="display-inline-block position-relative">
          <div info-box="item.object" infobox-class="'on-profile'">
            <avatar type=":: 'User'" src=":: item.object.avatar.small" size="small" href="getProfileLink(item.object._type, item.object._id)"></avatar>
          </div>
        </div>
        <div ng-if="item.verb == 'community_new_post' || item.verb == 'new_post'">
          <timeline-post item="item.object"></timeline-post>
        </div>
        <div ng-if="item.verb == 'new_rating_received' || item.verb == 'new_rating'">
          <div ng-init='receivedRatings = [item.object]'>
            <div class="box padding-none ratings home-ratings">
              <div ng-include="'assets/components/ratings/_itemReceivedHomeRatings.html'"></div>
            </div>
          </div>
        </div>
        <div ng-if="item.verb == 'group' && item.type == 'community_accepted_user'">
          <div class="display-flex flex-wrap">
            <div ng-repeat="userObject in item.objects track by $index" class="margin-right-medium">
              <div info-box="userObject.object" infobox-class="'on-profile'">
                <avatar type=":: 'User'" src=":: userObject.object.avatar.normal" size="small" href="getProfileLink(userObject.object._type, userObject.object._id)"></avatar>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
