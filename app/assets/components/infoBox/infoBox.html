<div class="info-box">
	<div class="user-info {{:: infoboxClass }}" ng-class=":: {'placement-left': (infoboxIndex+1) % 3 == 0}" ng-if="show">
		<div class="user-info-inner-wrapper">
			<div loading delayed="false" show="!info && !error" class="loading-bar"></div>
			<div class="text-center" ng-if="error">
				<span class="text-danger">{{:: 'INFO_BOX_LOADING_ERROR' | translate }}</span>
			</div>
			<div class="inner" ng-if="info">
				<div class="post-count">
					<div class="count_accomplished" ng-bind-html=":: ('count-of-wished-and-gifts' | translate: {value: info.post_count.needs + info.post_count.offers })"></div>
				</div>
				<div class="author-about" ng-if=":: info.motto" ng-bind=":: info.motto"></div>
				<user-intel-readout entity="info" type="'infobox'"></user-intel-readout>


				<!-- HERE is a list of common/relative people -->
				<div class="display-table table-with-icons">
					<!-- common followees -->
					<div class="display-table-row" ng-if=" :: connections.users.length == 1">
						<div class="display-table-cell addon">
							<i class="fa fa-fw fa-user"></i>
						</div>
						<div class="display-table-cell">
							<span ng-bind-html="::'INFOBOX.CONNECTIONS.COMMON_USERS.'+pluralCat(connections.users.length) | translate:{count:connections.users.length}"></span> <a ng-href="{{:: getProfileLink(connections.users[0]._type, connections.users[0]._id)}}">{{ :: connections.users[0].name }}</a>
						</div>
					</div>
				
					<div class="display-table-row" ng-if=" :: connections.users.length > 1">
						<div class="display-table-cell addon">
							<i class="fa fa-fw fa-user"></i>
						</div>
						<div class="display-table-cell">
							<span ng-bind-html=":: 'INFOBOX.CONNECTIONS.COMMON_USERS.'+pluralCat(connections.users.length) | translate:{count:connections.users.length}"></span>
							<a ng-href="{{:: getProfileLink(connections.users[0]._type, connections.users[0]._id)}}">{{ :: connections.users[0].name }}</a>
							<span ng-if=":: connections.users.length == 2"> {{ :: 'AND' | translate }} </span>
							<span ng-if=":: connections.users.length > 2">, </span>
							<a ng-href="{{:: getProfileLink(connections.users[1]._type, connections.users[1]._id)}}">{{ :: connections.users[1].name }}</a>
							<span ng-if=":: connections.users.length > 2" ng-bind-html="'INFOBOX.CONNECTIONS.AND_X_OTHER.'+pluralCat(connections.users.length - 2) | translate:{count:+connections.users.length - 2 }"></span>
						</div>
					</div>
					<!-- common communities -->
					<div class="display-table-row" ng-if=" :: connections.userCommunities.length == 1">
						<div class="display-table-cell addon">
							<i class="fa fa-fw icon-community"></i>

						</div>
						<div class="display-table-cell">
							<span ng-bind-html="::'INFOBOX.CONNECTIONS.COMMON_COMMUNITIES.'+pluralCat(connections.userCommunities.length) | translate:{count:connections.userCommunities.length}"></span>
							<a ng-href="{{:: getProfileLink(connections.userCommunities[0]._type, connections.userCommunities[0]._id)}}">{{ :: connections.userCommunities[0].name }}</a>
						</div>
					</div>

					<div class="display-table-row" ng-if=" :: connections.userCommunities.length > 1">
						<div class="display-table-cell addon">
							<i class="fa fa-fw icon-community"></i>
						</div>
						<div class="display-table-cell">
							<span ng-bind-html=":: 'INFOBOX.CONNECTIONS.COMMON_COMMUNITIES.'+pluralCat(connections.userCommunities.length) | translate:{count:connections.userCommunities.length}"></span>
							<a ng-href="{{:: getProfileLink(connections.userCommunities[0]._type, connections.userCommunities[0]._id)}}">{{ :: connections.userCommunities[0].name }}</a>
							<span ng-if=":: connections.userCommunities.length == 2"> {{ :: 'AND' | translate }} </span>
							<span ng-if=":: connections.userCommunities.length > 2">, </span>
							<a ng-href="{{:: getProfileLink(connections.userCommunities[1]._type, connections.userCommunities[1]._id)}}">{{ :: connections.userCommunities[1].name }}</a>
							<span ng-if=":: connections.userCommunities.length > 2" ng-bind-html="'INFOBOX.CONNECTIONS.AND_X_OTHER.'+pluralCat(connections.userCommunities.length - 2) | translate:{count:+connections.userCommunities.length - 2 }"></span>
						</div>
					</div>

					<!-- common community members -->
					<div class="display-table-row" ng-if=" :: connections.community.length == 1">
						<div class="display-table-cell addon">
							<i class="fa fa-fw icon-community"></i>
						</div>
						<div class="display-table-cell">
							<span ng-bind-html="::'INFOBOX.CONNECTIONS.COMMON_COMMUNITY_MEMBERS.'+pluralCat(connections.community.length) | translate:{count:connections.community.length}"></span>
						<a ng-href="{{:: getProfileLink(connections.community[0]._type, connections.community[0]._id)}}">{{ :: connections.community[0].name }}</a>
						</div>
					</div>

					<div class="display-table-row" ng-if=" :: connections.community.length > 1">
						<div class="display-table-cell addon">
							<i class="fa fa-fw icon-community"></i>
						</div>
						<div class="display-table-cell">
							<span ng-bind-html=":: 'INFOBOX.CONNECTIONS.COMMON_COMMUNITY_MEMBERS.'+pluralCat(connections.community.length) | translate:{count:connections.community.length}"></span>
							<a ng-href="{{:: getProfileLink(connections.community[0]._type, connections.community[0]._id)}}">{{ :: connections.community[0].name }}</a>
							<span ng-if=":: connections.community.length == 2"> {{ :: 'AND' | translate }} </span>
							<span ng-if=":: connections.community.length > 2">, </span>
							<a ng-href="{{:: getProfileLink(connections.community[1]._type, connections.community[1]._id)}}">{{ :: connections.community[1].name }}</a>
							<span ng-if=":: connections.community.length > 2" ng-bind-html="'INFOBOX.CONNECTIONS.AND_X_OTHER.'+pluralCat(connections.community.length - 2) | translate:{count:+connections.community.length - 2 }"></span>
						</div>
					</div>
				</div>
				<!-- END OF list of common/relative people -->


				<div class="display-flex flex-space-between">
					<div class="social">
						<a ng-if=":: info.facebook" class="fa fa-fw fa-facebook-square" title="Facebook" href="{{:: info.facebook}}" target="_blank"></a>
						<a ng-if=":: info.googleplus" class="fa fa-fw fa-google-plus-square" title="Google+" href="{{:: info.googleplus}}" target="_blank"></a>
						<a ng-if=":: info.twitter" class="fa fa-fw fa-twitter-square" title="Twitter" href="{{:: info.twitter}}" target="_blank"></a>
						<a ng-if=":: info.linkedin" class="fa fa-fw fa-linkedin-square" title="LinkedIn" href="{{:: info.linkedin}}" target="_blank"></a>
					</div>
					<a class="link-secondary" ng-href="{{:: getProfileLink(info._type, info._id)}}">{{:: 'WHOLE_PROFILE' | translate }}</a>
				</div>
			</div>
		</div>
	</div>
	<ng-transclude></ng-transclude>
</div>