<div loading show="!profileLoaded"></div>
<div class="profile-view profile-common" ng-show="profileLoaded" ng-class="{'mine-profile': mine, 'others-profile': ! mine}">
	<div class="user" ng-show="!info">
		<p>{{:: 'ERR_USER_NOT_FOUND' | translate }}</p>
	</div>
	<header ng-show="info">
		<div class="user-basic large-12 columns">
			<h1>
				<a dont-jump-top href="{{:: profileLink }}">
					<span>{{info.name}}</span>
				</a>
			</h1>
			<div class="button-group right">
				<button class="button large others margin-10" ng-click="openUserRatingForm()"> {{:: 'THUMB_UP' | translate }}
				</button>
				<button ng-if="!info.is_followed" class="hollow button large others margin-10" ng-click="toggleFollow(info._id)">
					<i class="fa fa-plus"></i> {{:: 'FOLLOW_BUTTON_CAPTION' | translate}}
				</button>
				<button ng-if="info.is_followed" class="hollow button large margin-10" ng-click="toggleFollow(info._id)">
					<i class="fa fa-times"></i> {{:: 'UNFOLLOW_BUTTON_CAPTION' | translate}}
				</button>
				<button ng-if="mine" ng-click="openInviteBox()" class="button large margin-10">
					<i class="fa fa-forward"></i>
					<span ng-bind-html=":: 'INVITE_FRIENDS_TO_HEARTH' | translate"></span>
				</button>
				<a href="{{:: basePath }}profile-edit" class="mine">
					<button class="button secondary large margin-10">
						<i class="fa fa-edit"></i> {{:: 'PROFILE_EDIT.HEADER' | translate}}</button>
				</a>
			</div>
			<div class="clear"></div>
			<div class="short-about" ng-if="info.motto">
				<i class="fa fa-quote-right"></i> {{:: info.motto }}
			</div>
		</div>
		<div class="highlights">
			<avatar ng-if="info.avatar" dont-jump-top size="large" class="left" src="info.avatar.large" href="getProfileLink('User', info._id)" type="info._type"></avatar>
			<span class="shadow large">
				<a dont-jump-top href="{{:: profileLink }}/posts" ng-class="{'active': (activePage == 'posts' || activePage == 'bookmarks' || activePage == 'replies')}" class="bubble large">
					<span>
						<b>{{info.post_count.offers}}</b>
						<br> {{ 'PROFILE.GIVES_COUNT.'+pluralCat(info.post_count.offers) | translate }}
						<hr class="orange" />
						<b>{{info.post_count.needs}}</b>
						<br> {{ 'PROFILE.WISHES_COUNT.'+pluralCat(info.post_count.needs) | translate }}
					</span>
				</a>
			</span>
			<span class="shadow small">
				<a dont-jump-top href="{{:: profileLink }}/received-ratings" ng-class="{'active': (activePage == 'received-ratings' || activePage == 'given-ratings')}" class="move-down bubble small">
					<span>
						<b>{{info.down_votes + info.up_votes}}</b>
						<br> {{:: 'RATINGS_COUNT' | translate }}
					</span>
				</a>
			</span>
			<span class="shadow small">
				<a dont-jump-top href="{{:: profileLink }}/followers" ng-class="{'active': (activePage == 'friends' || activePage == 'following' || activePage == 'followers')}" class="bubble medium">
					<span>
						<span ng-if="mine && info" ng-bind-html="'X_PEOPLE_INSPIRED_BY_ME.'+pluralCat(info.followers_count) | translate: '{count: '+info.followers_count+'}'"></span>
						<span ng-if="!mine && info" ng-bind-html="'X_PEOPLE_INSPIRED_BY_HIM.'+pluralCat(info.followers_count) | translate: '{count: '+info.followers_count+'}'"></span>
						<hr class="blue" />
						<span ng-if="mine && info" ng-bind-html="'X_PEOPLE_INSPIRING_ME.'+pluralCat(info.followees_count) | translate: '{count: '+info.followees_count+'}'"></span>
						<span ng-if="!mine && info" ng-bind-html="'X_PEOPLE_INSPIRING_HIM.'+pluralCat(info.followees_count) | translate: '{count: '+info.followees_count+'}'"></span>
					</span>
				</a>
			</span>
			<span class="shadow small">
				<a dont-jump-top href="{{:: profileLink }}/communities" class="bubble small move-down" ng-class="{'active': activePage == 'communities'}">
					<span>
						<b>{{info.communities_count}}</b>
						<br /> {{ 'COMMUNITIES_PL.'+pluralCat(info.communities_count) | translate }}
					</span>
				</a>
			</span>
			<a dont-jump-top href="{{:: profileLink }}/received-ratings">
				<div ng-if='info' class='columns large-8 karma-wrapper' title="{{:: 'COUNT_OF_PLUS_POINTS' | translate }}: {{ info.up_votes }} | {{:: 'COUNT_OF_MINUS_POINTS' | translate }}: {{ info.down_votes }}">
					<div class='karma-alt'>
						<div class='karma-block positive' ng-style='{width: (info.karma) + "%"}' ng-if='info.karma != null && info.karma > 0'>
							<span ng-bind='info.karma + "%"'></span>
							<i class='fa icon-rating-positive'></i>
						</div>
						<div class='karma-block negative' ng-style='{width: (100 - info.karma) + "%"}' ng-if='info.karma != null && info.karma < 100'>
							<i class='fa icon-rating-negative'></i>
							<span ng-bind='(100 - info.karma) + "%"'></span>
						</div>
						<div class='karma-block empty text-center' ng-if='info.karma == null && mine' translate='PROFILE.TOP.KARMA_NO_RATING_ME'></div>
						<div class='karma-block empty text-center' ng-if='info.karma == null && !mine' translate='PROFILE.TOP.KARMA_NO_RATING_OTHER'></div>
					</div>
				</div>
			</a>
		</div>
		<div class="clear"></div>
	</header>
	<div class="clear"></div>
	<div class="profile-pages-container" ng-show="info" ui-view></div>
</div>
