<h1 class="text-center">
	<span ng-if="!params.facebook" translate="SIGNUP_HEADING"></span>
	<span ng-if="params.facebook" translate="SIGNUP_HEADING_FB"></span>
</h1>

<div class="box register-login-dialog" ng-cloak>
	<div class="register-form row">
		<div class="headMessage error"></div>
		<form ng-cloak ng-submit="register(user, registerForm)" name="registerForm" novalidate class="register-login-form" ng-show="! sent">
			<div class="register-notify-area"></div>
      <div class='alert-box alert' ng-show="showError.blockedUserByEmail">
        <i class="fa fa-exclamation-triangle"></i>
        <span translate="SIGNUP_BLOCKED_EMAIL_ERROR" translate-compile translate-values="{'attrs': 'ng-href=\'feedback\''}">
	    </span>
      </div>
      <p class="text-center" ng-if="!params.facebook"><span translate="SIGNUP_HEADING_TEXT"></span></p>

			<p class="text-center" translate="SIGNUP_HEADING_TEXT_FB" ng-if="params.facebook"></p>

			<div class="row block">
				<div class="small-12 medium-6 large-6 columns" title="{{showError | json}}">
					<label for="first_name">{{'FIRST_NAME_PLACEHOLDER' | translate}}</label>
					<input id="first_name" type="text" class="register_name" name="first_name" ng-model="user.first_name" ng-focus="showError.first_name = false" ng-blur="showError.first_name = true" class="form-control text-input top" required ng-minlength="2" />
					<div class="form-error" ng-show="showError.first_name && (registerForm.first_name.$error.required || registerForm.first_name.$error.user || registerForm.first_name.$error.minlength)">
						<span ng-show="registerForm.first_name.$error.required" translate="ERR_NOT_FILLED_FIRST_NAME"></span>
						<span ng-show="registerForm.first_name.$error.used" translate="SIGNUP_ERR_BAD_FIRST_NAME"></span>
						<span ng-show="registerForm.first_name.$error.minlength" translate="SIGNUP_ERR_SHORT_FIRST_NAME"></span>
					</div>
				</div>
				<div class="small-12 medium-6 large-6 columns">
					<label for="last_name">{{'LAST_NAME_PLACEHOLDER' | translate}}</label>
					<input id="last_name" type="text" class="register_name" name="last_name" ng-model="user.last_name" class="form-control text-input top" />
				</div>
			</div>

			<div class="text-in-input block">
				<label for="email">
					<span translate="EMAIL_PLACEHOLDER"></span>
					<input id="email" type="email" name="email" ng-model="user.email" ng-focus="showError.email = false" ng-blur="showError.email = true" required class="form-control text-input top" email-validator mailgun-validator ng-model-options="{ updateOn: 'blur' }">
					<i ng-show="registerForm.$pending.mailgun || registerForm.$pending.used" class="fa fa-spin fa-spinner" style="top:2.2rem;"></i>
					<div class="form-error" ng-show="showError.email">
						<span ng-show="registerForm.email.$error.required">{{ 'ERR_NOT_FILLED_EMAIL' | translate }}</span>
						<span ng-show="registerForm.email.$error.used">{{ 'ERR_EMAIL_EXISTS' | translate }}</span>
						<span ng-show="registerForm.email.$error.email">{{ 'SIGNUP_ERR_BAD_EMAIL_FORMAT' | translate }}</span>
						<span ng-show="registerForm.email.$error.mailgun" ng-bind-html=":: 'ERR_MAILGUN_NOT_VALID_EMAIL' | translate"></span>
						<span ng-show="apiErrors.email">{{ apiErrors.email | translate }}</span>
					</div>
				</label>
			</div>

			<!-- 			<span mailgun-validator-did-you-mean target="user.email"></span> -->

			<div class="block">
				<label for="password">
					<span translate="PASS_PLACEHOLDER"></span>
					<show-text-in-password>
						<input id="password" type="password" name="password" ng-model="user.password" ng-focus="showError.password = false" ng-blur="showError.password = true" class="form-control text-input top" required ng-minlength="4" />
					</show-text-in-password>
					<div class="form-error" ng-show="showError.password">
						<span ng-show="registerForm.password.$error.required" translate="SIGNUP_ERR_NO_PASSWORD"></span>
						<span ng-show="registerForm.password.$error.minlength" translate="SIGNUP_ERR_SHORT_PASSWORD"></span>
					</div>
				</label>
			</div>

      <div class="block">
				<label>
			    <checkbox model="user.eula" required name="eula" class="box box--checkbox" ng-class="{'invalid': registerForm.eula.$invalid && (registerForm.$submitted || registerForm.eula.$dirty)}">
						<div translate="EULA.ACCEPTATION_TEXT" translate-values="{attrs: 'ng-click=\'showTerms()\''}" translate-compile></div>
			    </checkbox>
			    <div ng-messages="registerForm.eula.$error" ng-show="registerForm.$submitted || registerForm.eula.$dirty">
			      <div ng-message="required" translate="EULA.ERROR_REQUIRED"></div>
			    </div>
			  </label>
      </div>

      <div class="block text-center">
				<button class="button" type="submit" test-beacon="register-button" ng-disabled="sending">
					<i class="fa fa-user"></i>
					<span translate="SIGNUP_BUTTON"></span>
				</button>
			</div>

			<hr/>

			<div class="social-login">
				<p>{{ 'ACCOUNT.REGISTER.VIA_SOCIAL_NETWORKS' | translate }}</p>
				<!-- <a href="" ng-click="oauthRegister('facebook')" class="fa fa-facebook"></a>
				<a href="" ng-href="{{ twitterAuthUrl }}" class="fa fa-twitter"></a>
				<a href="" ng-click="oauthRegister('google')" class="fa fa-google"></a> -->
				<a href="" ng-click="oauthRegister('facebook')" class="fa fa-facebook"></a>
				<a href="" ng-click="oauthRegister('twitter')" class="fa fa-twitter"></a>
				<a href="" ng-click="oauthRegister('google')" class="fa fa-google"></a>
			</div>
			<hr/>
			<div class="bottom">
				<p>{{ 'ALREADY_HAVE_AN_ACCOUNT' | translate }}
					<a href="{{ basePath }}login">{{ 'LOGIN_TO_HEARTH' | translate }}</a>
				</p>
			</div>
		</form>
		<div class="register-successful success">
			<p class="text-center" translate="SIGNUP_WAS_SUCCESSFUL"></p>
		</div>
	</div>
</div>
