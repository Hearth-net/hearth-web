<div loading show="!profileLoaded"></div>
<div class="community-view profile-common" ng-if="profileLoaded" ng-class="{'mine': mine, 'others': !mine}">
	<div class="user" ng-if="! info">
		<p>{{:: 'COMMUNITY.NOTIFY.ERROR_NOT_FOUND' | translate }}</p>
	</div>
	<header ng-if="info" class="margin-bottom-large">
		<div class="user-basic large-12 columns">
      <div class="display-medium-flex flex-space-between">
        <h1>
          <a dont-jump-top href="{{:: communityLink }}">
          	<span>{{:: info.name }}</span>
          </a>
        </h1>
        <div class="button-group large display-inline-flex">
          <button ng-if="!mine" class="button" ng-click="openUserRatingForm()" translate="PROFILE.ACTION_FEEDBACK "></button>
          <button class="hollow button" ng-if="!mine && info.is_member" ng-click="confirmBox({title: 'COMMUNITY.CONFIRM_LEAVE.TITLE', text: 'COMMUNITY.CONFIRM_LEAVE.TEXT', callback: leaveCommunity, callbackScope: this})">
            <i class="fa fa-minus"></i>
            <span translate="COMMUNITY.ACTION_LEAVE_COMMUNITY"></span>
          </button>
          <button ng-if="!mine && !info.is_member && loggedUser._id && ! info.is_applicant" ng-click="applyForCommunity()" class="hollow button">
            <i class="fa fa-plus"></i>
            <span translate="COMMUNITY.ACTION_APPLY_FOR_MEMBERSHIP"></span>
          </button>
          <button ng-if="!mine && info.is_applicant" class="hollow button">
            <i class="fa fa-plus"></i>
            <span translate="COMMUNITY.APPLY_FOR_MEMBERSHIP_SENT"></span>
          </button>
          <a href="{{:: communityLink }}/invite-friends" class="right" ng-if="false">
            <button class="button">
              <i class="fa fa-share"></i>
              <span translate="COMMUNITY.ACTION_INVITE_FRIENDS"></span>
            </button>
          </a>
          <a ng-if="mine" href="{{:: communityLink }}/edit">
            <button class="button secondary">
              <i class="fa fa-gears"></i>
              <span translate="PROFILE.ACTION_EDIT"></span>
            </button>
          </a>
        </div>
      </div>
			<div class="short-about" ng-if="info.motto">
				<i class="fa fa-quote-right"></i> {{:: info.motto }}
			</div>
		</div>
		<div class="highlights">
			<avatar dont-jump-top size="large" class="left" src="info.avatar.large" href=":: basePath+'community/'+info._id" type="info._type"  thanks=":: info.up_votes" show-glow="true"></avatar>
			<span class="shadow large">
				<a dont-jump-top href="{{:: communityLink }}/posts" ng-class="{'active': (activePage == 'posts')}" class="bubble large">
					<span>
						<b>{{ info.post_count.offers }}</b>
						<br /> {{ 'COMMUNITY.X_GIVES.'+pluralCat(info.post_count.offers) | translate }}
						<hr class="orange" />
						<b>{{ info.post_count.needs }}</b>
						<br /> {{ 'COMMUNITY.X_WISHES.'+pluralCat(info.post_count.needs) | translate }}
					</span>
				</a>
			</span>
			<span class="shadow small">
				<a dont-jump-top href="{{:: communityLink }}/members" class="bubble small move-down" ng-class="{'active': (activePage == 'members' || activePage == 'applications')}">
					<span ng-if="info" ng-bind-html="'COMMUNITY.X_MEMBERS.'+pluralCat(info.member_count) | translate: '{count: '+info.member_count+'}'"></span>
				</a>
			</span>
			<span class="shadow large">
				<a dont-jump-top href="{{:: communityLink }}/received-ratings" ng-class="{'active': (activePage == 'received-ratings' || activePage == 'given-ratings')}" class="bubble medium">
					<span>
						<b class="avatar-thanks">{{info.up_votes}}</b>
						<br>
						<span translate="PROFILE.RATING.COUNT.few"></span>
						<hr class="orange" />
						<strong>{{info.down_votes}}</strong>Ã—
						<span translate="PROFILE.RATING.NEGATIVE" class="text-smaller"></span>
					</span>
				</a>
			</span>
			<span class="shadow small">
				<a dont-jump-top href="{{:: communityLink }}/about" class="bubble small move-down" ng-class="{'active': (activePage == 'about')}">
					<span>
						<b>?</b>
						<br />
						<span translate="COMMUNITY.PROFILE.SHORT_ABOUT"></span>
					</span>
				</a>
			</span>
		</div>
		<div class="clear"></div>
	</header>
	<div ng-show="topLoaded" ui-view></div>
</div>